{"version":3,"file":"nodeLoader-V31u1RXi.js","sources":["../../src/utils/nodeLoader.js"],"sourcesContent":["/**\r\n * 節點載入器工具函數\r\n * 用於從JSON設定或後端API載入節點資料\r\n */\r\n\r\nimport nodesConfig from '../data/nodes.json'\r\n\r\n/**\r\n * 從本地JSON檔案載入節點設定\r\n * @returns {Array} 節點設定陣列\r\n */\r\nexport function loadNodesFromJson() {\r\n  const nodes = []\r\n  \r\n  // 遍歷所有分類\r\n  nodesConfig.categories.forEach(category => {\r\n    // 將每個分類下的節點新增到結果陣列\r\n    category.nodes.forEach(node => {\r\n      nodes.push({\r\n        ...node,\r\n        category: category.name\r\n      })\r\n    })\r\n  })\r\n  \r\n  return nodes\r\n}\r\n\r\n/**\r\n * 從後端API載入節點設定\r\n * @param {string} apiUrl API地址\r\n * @returns {Promise<Array>} 節點設定陣列\r\n */\r\nexport async function loadNodesFromAPI(apiUrl = '/api/nodes') {\r\n  try {\r\n    const response = await fetch(apiUrl)\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`)\r\n    }\r\n    \r\n    const data = await response.json()\r\n    \r\n    // 如果API回傳的格式與JSON檔案相同\r\n    if (data.categories) {\r\n      return loadNodesFromJson()\r\n    }\r\n    \r\n    // 如果API直接回傳節點陣列\r\n    return data\r\n  } catch (error) {\r\n    console.error('從API載入節點設定失敗:', error)\r\n    // 回退到本地設定\r\n    return loadNodesFromJson()\r\n  }\r\n}\r\n\r\n/**\r\n * 根據分類篩選節點\r\n * @param {Array} nodes 節點陣列\r\n * @param {string} category 分類名稱\r\n * @returns {Array} 篩選後的節點陣列\r\n */\r\nexport function filterNodesByCategory(nodes, category) {\r\n  if (!category) return nodes\r\n  return nodes.filter(node => node.category === category)\r\n}\r\n\r\n/**\r\n * 取得所有可用的分類\r\n * @param {Array} nodes 節點陣列\r\n * @returns {Array} 分類名稱陣列\r\n */\r\nexport function getAvailableCategories(nodes) {\r\n  const categories = [...new Set(nodes.map(node => node.category))]\r\n  return categories.filter(Boolean)\r\n} "],"names":["loadNodesFromJson","nodes","nodesConfig","category","node"],"mappings":"6zEAWO,SAASA,GAAoB,CAClC,MAAMC,EAAQ,CAAA,EAGd,OAAAC,EAAY,WAAW,QAAQC,GAAY,CAEzCA,EAAS,MAAM,QAAQC,GAAQ,CAC7BH,EAAM,KAAK,CACT,GAAGG,EACH,SAAUD,EAAS,IAC3B,CAAO,CACP,CAAK,CACL,CAAG,EAEMF,CACT"}